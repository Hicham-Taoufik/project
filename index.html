<script>
    async function fetchPatientData() {
        const urlParams = new URLSearchParams(window.location.search);
        const cin = urlParams.get('cin'); // Extract CIN from URL

        if (!cin) {
            alert("No patient CIN provided.");
            return;
        }

        try {
            // Fetch data from n8n Webhook
            const response = await fetch(`https://your-n8n-instance.com/webhook-test/patient-info?cin=${cin}`);
            const data = await response.json();

            // Populate the webpage with patient data
            document.getElementById('name').textContent = data.name || "N/A";
            document.getElementById('cin').textContent = data.cin || "N/A";
            document.getElementById('dob').textContent = data.dob || "N/A";
            document.getElementById('address').textContent = data.address || "N/A";

        } catch (error) {
            console.error("Error fetching patient data:", error);
            alert("Error retrieving patient information.");
        }
    }

    // Run the function when the page loads
    fetchPatientData();
</script>
